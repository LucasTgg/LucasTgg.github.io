<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="/css/articulo.css">
    <link rel="stylesheet" href="/css/estilos.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Document</title>
</head>
<body>
   
        <nav class="navbar navbar-expand-lg navbar-light bg-white">
        <div class="container">
            <a href="index.html" id="logo-container">
                <img class="img-fluid" id="logo" src="/imagenes/Logo.png" alt="Logo">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="/index.html">INICIO</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">SERVICIOS</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">¿QUIENES SOMOS?</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">TRABAJA CON NOSOTROS</a></li>
                    <li class="nav-item"><a class="nav-link" href="/paginas/Blog.html">BLOG</a></li>
                    <li class="nav-item"><a class="nav-link" id="contacto" href="/paginas/contacto.html">CONTACTO</a></li>
                </ul>
            </div>
        </div>
    </nav>



    <div class="contenido-blog">
        <h1 id="titulo"></h1>
        <img id="imagen" src="" alt="Imagen del artículo">
        <p id="contenido"></p>


    </div>
   




<script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function() {
    // Obtener el ID del artículo desde la URL (ej: articulo.html?id=1)
    const params = new URLSearchParams(window.location.search);
    const articleId = params.get("id");
    console.log("ID recibido:", articleId);

    // URL del CSV publicado desde Google Sheets (reemplázala por la tuya)
    const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQaRueMVKt4SvspMgPdqwvftejacg-vLHo1XeMs-VZCUWkvsTAC7XCTvZU_2m7WkvbAJXrUnIZnS4Pc/pub?gid=0&single=true&output=csv";

    Papa.parse(sheetURL, {
        download: true,
        header: true,
        skipEmptyLines: true,
        complete: function(results) {
            const articles = results.data;
            console.log("Artículos parseados:", articles);
            
            // Buscar el artículo cuyo ID (sin espacios) coincida con el parámetro de la URL.
            const article = articles.find(a => a.ID && a.ID.trim() == articleId);
            
            
            if (!article) {
                // Si no se encuentra, mostrar un mensaje de error.
                document.getElementById("titulo").textContent = "Artículo no encontrado";
                document.getElementById("imagen").style.display = "none";
                document.getElementById("contenido").textContent = "";
                console.error("No se encontró el artículo con ID:", articleId);
                return;
            }
            
            
            // Mostrar los datos en la página.
            
            document.getElementById("titulo").textContent = article["Título"] || "Sin título";
            document.getElementById("imagen").src = article["Imagen"] || "";
            document.getElementById("imagen").alt = article["Título"] || "Imagen del artículo";
            document.getElementById("contenido").innerHTML = (article["Contenido"] || "Sin contenido").replace(/\n/g, "<br>");

            

            
        },
        error: function(err) {
            console.error("Error al parsear CSV:", err);
        }
    });
});
</script>

<section class="container-coments">
    <div class="contenedor-comentarios">
        <div class="comentarios">
            <h3>Deja tu comentario</h3>
            <form id="comment-form">
                <input type="text" id="name" placeholder="Tu nombre" required>
                <textarea id="message" placeholder="Escribe tu comentario..." required></textarea>
                <button type="submit">Enviar</button>
            </form>
            
            <h3>Comentarios</h3>
            <ul id="comments-list"></ul>
    </div>
    </div>

</section>


    <!-- Firebase -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        import { getDatabase, ref, push, onChildAdded } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";
    
        const firebaseConfig = {
            apiKey: "AIzaSyCCXMXoc5ImGHWftUdO28m2UWFb4nuRc9M",
            authDomain: "comentarios-f9b9f.firebaseapp.com",
             databaseURL: "https://comentarios-f9b9f-default-rtdb.firebaseio.com",
            projectId: "comentarios-f9b9f",
            storageBucket: "comentarios-f9b9f.firebasestorage.app",
            messagingSenderId: "980307755780",
            appId: "1:980307755780:web:e1a8bac9e3ca09b3790651",
            measurementId: "G-JPYZ7HX418"
        };
    
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
    
        // Obtener el ID del artículo desde la URL
        const params = new URLSearchParams(window.location.search);
        const articleId = params.get("id");
    
        // Crear referencia única por artículo
        const commentsRef = ref(db, `comments/${articleId}`);
    
        // Enviar comentario
        document.getElementById("comment-form").addEventListener("submit", function (e) {
            e.preventDefault();
            const name = document.getElementById("name").value;
            const message = document.getElementById("message").value;
    
            if (name && message) {
                push(commentsRef, { name, message });
                document.getElementById("comment-form").reset();
            }
        });
    
        // Cargar comentarios específicos de este artículo
        onChildAdded(commentsRef, (data) => {
            const comment = data.val();
            const listItem = document.createElement("li");
            listItem.innerHTML = `<strong>${comment.name}:</strong> ${comment.message}`;
            document.getElementById("comments-list").appendChild(listItem);
        });
    </script>








    










    <footer>
        <div class="contenedor-footer">
            <div class="logo-footer">
                <img src="/imagenes/Logo.png" alt="">
            </div>
            <div class="footer-nav">
                <ul class="">
                    <li class="nav-item"><a class="nav-link" href="#">INICIO</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">SERVICIOS</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">¿QUIENES SOMOS?</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">TRABAJA CON NOSOTROS</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">BLOG</a></li>
                    <li class="nav-item"><a class="nav-link" href="#">CONTACTO</a></li>
                </ul>
            </div>
            <div class="datos-contacto">
                <h4>Contacto</h4>
                <ul>
                    <li>Correo electrónico</li>
                    <li>Correo electrónico</li>
                </ul>
            </div>
            <div class="redes-sociales">
                <a href="#" class="icon"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="icon"><i class="fab fa-instagram"></i></a>
                <a href="#" class="icon"><i class="fab fa-linkedin-in"></i></a>
                <a href="#" class="icon"><i class="fab fa-x-twitter"></i></a>
            </div>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>